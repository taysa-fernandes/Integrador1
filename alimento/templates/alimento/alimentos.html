{% extends 'core/base.html' %}

{% load static %}

{% block sidebar %}
  {% include "core/sidebar.html" with opcao_menu_atual='listar-alimentos' %}
{% endblock %}

{% block main %}
<body>
  <main>
    <header>
      <nav class="breadcrumbs">
        <div class="breadcrumb">
          <a href="{% url 'listar-pacientes'%}">
            <i class="ph ph-house-line"></i>
            <span>Home /</span>
          </a>
        </div>

        <div class="breadcrumb">
          <a href="/alimentos">
            <i class="ph ph-apple-logo"></i>
            <span>Alimentos /</span>
          </a>
        </div>
      </nav>

      {% include "core/info-usuario.html" with info_usuario=nutricionista.nome tipo_usuario='nutricionista' %}
    </header>
    <section class="conteudo-principal">
      <div class="cabecalho-conteudo-principal">
        <h1>Alimentos</h1>

        <button class="abrirModal botao-padrao" type="button" hx-get={% url 'cadastrar-alimento' %} hx-trigger='click' hx-target='#modal' hx-swap="innerHTML">
          Novo alimento
        </button>
      </div>

      <div class="nav-tipos-de-alimentos">
        <a href="{% url 'listar-alimentos' %}?tipo=comuns" class="{% if not request.GET.tipo or request.GET.tipo == 'comuns' %}selecionado-tipo-alimento{% endif %}">Comuns</a>
        <a href="{% url 'listar-alimentos' %}?tipo=substitutos" class="{% if request.GET.tipo == 'substitutos' %}selecionado-tipo-alimento{% endif %}">Substitutos</a>
        <hr />
      </div>
      
      {% if request.GET.tipo %}
        {% for alimento in alimentos %}
          {% if request.GET.tipo == 'comuns' and not alimento.e_substituto %}
            {% include "alimento/collapse-alimentos.html" %}
          {% elif request.GET.tipo == 'substitutos' and alimento.e_substituto %}
            {% include "alimento/collapse-alimentos.html" %}
          {% endif %}
        {% endfor %}
      {% else %}
        {% for alimento in alimentos %}
          {% if not alimento.e_substituto %}
            {% include "alimento/collapse-alimentos.html" %}
          {% endif %}
        {% endfor %}
      {% endif %}


      {% comment %} <nav>
        <ul class="pagination">
          <li class="page-item {% if alimentos.has_previous %}">
            <a class="page-link" href="?page=1" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
    
          {% for num in alimentos.paginator.page_range %}
            <li class="page-item {% if num == alimentos.number %}active{% endif %}">
                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
            </li>
          {% endfor %}
    
          <li class="page-item {% if alimentos.has_next %}">
            <a class="page-link" href="?page={{ alimentos.next_page_number }}" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav> {% endcomment %}

      {% include "core/paginacao.html" %}

      <dialog class="cadastro-alimento" id="myModal">
        <button class="fecharModal"><i class="ph ph-x"></i></button>

        <div id="modal">
        </div>
      </dialog>


      
    </section>
  </main>
</body>
{% endblock %}
